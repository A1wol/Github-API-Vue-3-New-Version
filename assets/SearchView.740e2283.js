import{d as Q,a as w,c as d,b as I,t as m,e,F as q,r as M,o as u,_ as P,f as r,s as W,g as X,w as N,v as Y,h as _,u as p,i as Z,n as ee,j as T,m as te,S as x,k as ae,l as A,p as R,q as C,x as se,y as oe,z as F,T as B}from"./index.cce7f10b.js";import{g as le,M as ne}from"./Modal.c730b976.js";const U=Q("githubData",{state:()=>({name:"",page:1,perPage:5,order:"asc",sort:"fork"}),actions:{setSearchingData(t,n,i,s,a){this.name=t,this.page=n,this.perPage=i,this.order=s,this.sort=a}},persist:!0}),ie={class:"select"},re=["value"],de={disabled:""},ue=["value"],_e=w({__name:"PanelSelect",props:{title:String,modelValue:[Number,String],options:Array},emits:["update:modelValue","onSearchRequest"],setup(t){return(n,i)=>(u(),d("div",ie,[I(m(t.title)+" ",1),e("select",{class:"select__input",value:t.modelValue,onChange:i[0]||(i[0]=s=>(n.$emit("update:modelValue",s.target.value),n.$emit("onSearchRequest")))},[e("option",de,m(t.title),1),(u(!0),d(q,null,M(t.options,s=>(u(),d("option",{value:s.value},m(s.text),9,ue))),256))],40,re)]))}});const V=P(_e,[["__scopeId","data-v-74a950e2"]]);function ce(t,n){return n.forEach(i=>{i.value||t.push(`${i.title} required`)}),t.length===0}const E=t=>(R("data-v-33ad345e"),t=t(),C(),t),ve={class:"panel"},pe=E(()=>e("div",null,"Repository name",-1)),me={class:"panel__text-field"},ge={class:"panel__text-field__button"},he={class:"panel__selects"},fe={key:0,class:"panel__label--page"},be=E(()=>e("div",{class:"panel__label--page__title"},"Page",-1)),ye={class:"panel__label--page__buttons"},Se={class:"panel__label--per-page"},$e={class:"panel__label"},xe={class:"panel__label"},we=w({__name:"repositorySearchingPanel",props:{repositoryListLength:Number,isDataTableLoading:Boolean,repositoryItems:Array},emits:["passPanelData"],setup(t,{emit:n}){const i=t,s=r(""),a=r(0),c=r(0),l=r(""),g=r(""),h=r([]),{name:f,page:b,sort:y,perPage:D,order:k}=W(U()),G=r([{text:"5",value:"5"},{text:"10",value:"10"},{text:"25",value:"25"},{text:"30",value:"30"},{text:"50",value:"50"},{text:"100",value:"100"}]),z=r([{text:"Descending",value:"desc"},{text:"Ascending",value:"asc"}]),j=r([{text:"stars",value:"stars"},{text:"fork",value:"fork"},{text:"updated",value:"updated"}]),S=r();function H($){h.value=[],ce(h.value,[{title:"Name",value:s.value},{title:"Page",value:c.value},{title:"Per Page",value:a.value},{title:"Order",value:g.value},{title:"Sorting",value:l.value}])&&n("passPanelData",{name:s.value,perPage:a.value,page:c.value,sort:l.value,order:g.value}),$.preventDefault()}function L(){c.value>=1&&S.value.requestSubmit()}function J(){c.value>1&&(c.value--,S.value.requestSubmit())}function K(){var $;(($=i.repositoryItems)==null?void 0:$.length)!==0&&(c.value++,S.value.requestSubmit())}return X(()=>{s.value=f.value.toString(),c.value=b.value.valueOf(),a.value=D.value.valueOf(),g.value=k.value.toString(),l.value=y.value.toString(),S.value.requestSubmit()}),($,o)=>(u(),d("div",ve,[e("form",{id:"app",ref_key:"form",ref:S,onSubmit:H},[e("label",null,[pe,e("div",me,[N(e("input",{"onUpdate:modelValue":o[0]||(o[0]=v=>s.value=v),placeholder:"Repository name"},null,512),[[Y,s.value]]),e("div",ge,[e("button",{onClick:o[1]||(o[1]=v=>L())},[I("SEARCH "),_(p(x),{type:"mdi",path:p(te)},null,8,["path"])])]),N(e("div",{class:"panel__errors"},m(h.value[0]),513),[[Z,h.value.length]])])]),e("div",he,[e("div",null,[i.repositoryListLength!==void 0&&i.repositoryListLength>a.value?(u(),d("label",fe,[be,e("div",ye,[e("div",{class:ee([c.value>1?"":"panel__label--page__buttons__firstPage"]),onClick:o[2]||(o[2]=v=>J())},[_(p(x),{type:"mdi",path:p(ae)},null,8,["path"])],2),e("div",null,m(c.value),1),e("div",{onClick:o[3]||(o[3]=v=>K())},[_(p(x),{type:"mdi",path:p(A)},null,8,["path"])])])])):T("",!0),e("label",Se,[_(V,{title:"Per Page",modelValue:a.value,"onUpdate:modelValue":o[4]||(o[4]=v=>a.value=v),options:G.value,onOnSearchRequest:o[5]||(o[5]=v=>L())},null,8,["modelValue","options"])])]),e("div",null,[e("label",$e,[_(V,{title:"Order",modelValue:g.value,"onUpdate:modelValue":o[6]||(o[6]=v=>g.value=v),options:z.value,onOnSearchRequest:o[7]||(o[7]=v=>L())},null,8,["modelValue","options"])]),e("label",xe,[_(V,{title:"Sorting",modelValue:l.value,"onUpdate:modelValue":o[8]||(o[8]=v=>l.value=v),options:j.value,onOnSearchRequest:o[9]||(o[9]=v=>L())},null,8,["modelValue","options"])])])])],544)]))}});const Pe=P(we,[["__scopeId","data-v-33ad345e"]]);const ke={},Le=t=>(R("data-v-816434d5"),t=t(),C(),t),De={class:"spinner"},Ve=Le(()=>e("svg",{version:"1.1",id:"L5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 100 100","enable-background":"new 0 0 0 0","xml:space":"preserve"},[e("circle",{fill:"#fff",stroke:"none",cx:"6",cy:"50",r:"6"},[e("animateTransform",{attributeName:"transform",dur:"1s",type:"translate",values:"0 15 ; 0 -15; 0 15",repeatCount:"indefinite",begin:"0.1"})]),e("circle",{fill:"#fff",stroke:"none",cx:"30",cy:"50",r:"6"},[e("animateTransform",{attributeName:"transform",dur:"1s",type:"translate",values:"0 10 ; 0 -10; 0 10",repeatCount:"indefinite",begin:"0.2"})]),e("circle",{fill:"#fff",stroke:"none",cx:"54",cy:"50",r:"6"},[e("animateTransform",{attributeName:"transform",dur:"1s",type:"translate",values:"0 5 ; 0 -5; 0 5",repeatCount:"indefinite",begin:"0.3"})])],-1)),Ie=[Ve];function Te(t,n){return u(),d("div",De,Ie)}const Re=P(ke,[["render",Te],["__scopeId","data-v-816434d5"]]),O=t=>(R("data-v-c26776ca"),t=t(),C(),t),Ce={class:"data-table"},Oe=O(()=>e("div",{class:"data-table__headers"},[e("div",null,"Name"),e("div",null,"Owner"),e("div",null,"Created"),e("div",null,"Navigation"),e("div",null,"Action")],-1)),Ne={class:"data-table__rows__content"},qe={"data-label":"Name"},Me={"data-label":"Owner"},Ae={"data-label":"Created"},Fe={"data-label":"Navigation"},Be=["onClick"],Ue=["onClick"],Ee={key:0},Ge={key:0,class:"data-table__rows__description"},ze=O(()=>e("div",{class:"data-table__rows__description__title"},"Description",-1)),je={class:"data-table__rows__description__content"},He={key:1,class:"data-table__rows__description"},Je=O(()=>e("div",{class:"data-table__rows__description__title"}," Item description is empty ",-1)),Ke=[Je],Qe={key:1,class:"data-table__spinner"},We=w({__name:"repositoryDataTable",props:{repositoryItems:Array,isTableDataLoading:Boolean},setup(t){return(n,i)=>{var s;return u(),d("div",Ce,[Oe,!t.isTableDataLoading&&((s=t.repositoryItems)==null?void 0:s.length)!==0?(u(!0),d(q,{key:0},M(t.repositoryItems,a=>(u(),d("div",{key:a.id,class:"data-table__rows"},[e("div",Ne,[e("div",qe,m(a.name),1),e("div",Me,m(a.owner.login),1),e("div",Ae,m(new Date(a.created_at).toLocaleDateString()),1),e("div",Fe,[e("button",{onClick:c=>n.$router.push(`Github-API-Vue-3-New-Version/repository-details/${a.id}`)},[I("Details "),_(p(x),{type:"mdi",path:p(A)},null,8,["path"])],8,Be)]),e("div",{style:se({transform:a.visible?"":"rotate(180deg)"}),onClick:c=>a.visible=!a.visible},[_(p(x),{type:"mdi",path:p(oe)},null,8,["path"])],12,Ue)]),_(B,{name:"description"},{default:F(()=>[a.visible?(u(),d("div",Ee,[a.description!==null?(u(),d("div",Ge,[ze,e("div",je,m(a.description),1)])):(u(),d("div",He,Ke))])):T("",!0)]),_:2},1024)]))),128)):(u(),d("div",Qe,[_(Re)]))])}}});const Xe=P(We,[["__scopeId","data-v-c26776ca"]]),Ye={class:"searching"},Ze={key:0},et={class:"searching__result-counter"},tt=w({__name:"repositoryList",emits:["openModal"],setup(t,{emit:n}){const i=r(!1),s=r(0),a=r(),c=U(),l=r(),g=r(!0);async function h(){try{if(l.value){a.value=[];const f={q:l.value.name,page:l.value.page.toString(),per_page:l.value.perPage.toString(),order:l.value.order,sort:l.value.sort},b=new URLSearchParams(f),y=await le(b.toString());s.value=y.data.total_count,c.setSearchingData(l.value.name,l.value.page,l.value.perPage,l.value.order,l.value.sort),i.value=!0,setTimeout(()=>{g.value=!1},1e3),a.value!==void 0&&y.data.items.forEach(D=>{var k;return(k=a.value)==null?void 0:k.push({...D,visible:!1})})}}catch(f){console.error(f),n("openModal")}}return(f,b)=>(u(),d("div",Ye,[_(Pe,{repositoryListLength:s.value,isDataTableLoading:g.value,repositoryItems:a.value,onPassPanelData:b[0]||(b[0]=y=>(l.value=y,h()))},null,8,["repositoryListLength","isDataTableLoading","repositoryItems"]),_(B,null,{default:F(()=>[i.value?(u(),d("div",Ze,[e("div",et,"Results: "+m(s.value),1),_(Xe,{repositoryItems:a.value,isTableDataLoading:g.value},null,8,["repositoryItems","isTableDataLoading"])])):T("",!0)]),_:1})]))}});const at=P(tt,[["__scopeId","data-v-a12daf48"]]),lt=w({__name:"SearchView",setup(t){const n=r(!1);return(i,s)=>(u(),d("div",null,[_(at,{onOpenModal:s[0]||(s[0]=a=>n.value=!0)}),_(ne,{showModal:n.value,modalText:"Repository List error",onCloseModal:s[1]||(s[1]=a=>n.value=!1)},null,8,["showModal"])]))}});export{lt as default};
